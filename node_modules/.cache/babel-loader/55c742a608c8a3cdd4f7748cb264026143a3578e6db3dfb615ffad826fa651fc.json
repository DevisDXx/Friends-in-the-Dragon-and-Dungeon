{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport _debounce from 'lodash.debounce';\nimport store from '../../../config/store';\nimport useWindowSize from '../../../utils/use-window-size';\nimport { isMobile } from 'react-device-detect';\nimport { SCREEN_SMALL_WIDTH, SCREEN_SMALL_HEIGHT, SCREEN_MEDIUM_WIDTH, SCREEN_MEDIUM_HEIGHT, MIN_WIDTH_FOR_JOURNAL, MIN_SIDESCREEN_WIDTH_FOR_JOURNAL } from '../../../config/constants';\nconst VIEWPORT_RESIZE_RATE = 250;\n\n// This function is both a React Hook and a Redux Action\nconst useGameViewportScaling = () => {\n  _s();\n  const {\n    height,\n    width\n  } = useWindowSize();\n  const nativeApp = window.location.search === '?nativeApp=true';\n  const _updateViewportScale = _debounce(updateViewportScale, VIEWPORT_RESIZE_RATE);\n  useEffect(() => {\n    let largeView = false;\n    let sideMenu = false;\n    let journalSideMenu = false;\n    // if we have a wide screen size\n    if (width > SCREEN_SMALL_WIDTH) {\n      largeView = true;\n      // if the screen size is too short\n      if (height < SCREEN_MEDIUM_HEIGHT) sideMenu = true;\n      if (height <= SCREEN_SMALL_HEIGHT) largeView = false;\n    }\n    // don't switch to side menu if there's no horizontal room\n    if (width < SCREEN_MEDIUM_WIDTH) {\n      sideMenu = false;\n    }\n    if (!(isMobile || nativeApp)) {\n      if (sideMenu) {\n        if (width > MIN_SIDESCREEN_WIDTH_FOR_JOURNAL) journalSideMenu = true;\n      } else {\n        if (width > MIN_WIDTH_FOR_JOURNAL) journalSideMenu = true;\n      }\n    }\n    _updateViewportScale({\n      largeView,\n      sideMenu,\n      journalSideMenu\n    });\n  }, [height, width]);\n  function updateViewportScale(_ref) {\n    let {\n      largeView,\n      sideMenu,\n      journalSideMenu\n    } = _ref;\n    store.dispatch({\n      type: 'SET_SIDE_MENU',\n      payload: sideMenu\n    });\n    store.dispatch({\n      type: 'SET_LARGE_VIEW',\n      payload: largeView\n    });\n    store.dispatch({\n      type: 'SET_SHOW_JOURNAL',\n      payload: journalSideMenu\n    });\n    const {\n      paused,\n      journalDialog\n    } = store.getState().dialog;\n    if (journalSideMenu && paused && journalDialog) {\n      store.dispatch({\n        type: 'PAUSE',\n        payload: {\n          pause: false,\n          journal: false\n        }\n      });\n    }\n  }\n};\n_s(useGameViewportScaling, \"QUW2Ah1DyG40TzqUClrPQQCJSTI=\", false, function () {\n  return [useWindowSize];\n});\nexport default useGameViewportScaling;","map":{"version":3,"names":["useEffect","_debounce","store","useWindowSize","isMobile","SCREEN_SMALL_WIDTH","SCREEN_SMALL_HEIGHT","SCREEN_MEDIUM_WIDTH","SCREEN_MEDIUM_HEIGHT","MIN_WIDTH_FOR_JOURNAL","MIN_SIDESCREEN_WIDTH_FOR_JOURNAL","VIEWPORT_RESIZE_RATE","useGameViewportScaling","_s","height","width","nativeApp","window","location","search","_updateViewportScale","updateViewportScale","largeView","sideMenu","journalSideMenu","_ref","dispatch","type","payload","paused","journalDialog","getState","dialog","pause","journal"],"sources":["C:/Users/devis/Downloads/react-rpg.com-master/src/features/app-state/actions/use-game-viewport-scaling.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport _debounce from 'lodash.debounce';\n\nimport store from '../../../config/store';\nimport useWindowSize from '../../../utils/use-window-size';\nimport { isMobile } from 'react-device-detect';\nimport {\n    SCREEN_SMALL_WIDTH,\n    SCREEN_SMALL_HEIGHT,\n    SCREEN_MEDIUM_WIDTH,\n    SCREEN_MEDIUM_HEIGHT,\n    MIN_WIDTH_FOR_JOURNAL,\n    MIN_SIDESCREEN_WIDTH_FOR_JOURNAL,\n} from '../../../config/constants';\n\nconst VIEWPORT_RESIZE_RATE = 250;\n\n// This function is both a React Hook and a Redux Action\nconst useGameViewportScaling = () => {\n    const { height, width } = useWindowSize();\n\n    const nativeApp = window.location.search === '?nativeApp=true';\n    const _updateViewportScale = _debounce(\n        updateViewportScale,\n        VIEWPORT_RESIZE_RATE\n    );\n\n    useEffect(() => {\n        let largeView = false;\n        let sideMenu = false;\n        let journalSideMenu = false;\n        // if we have a wide screen size\n        if (width > SCREEN_SMALL_WIDTH) {\n            largeView = true;\n            // if the screen size is too short\n            if (height < SCREEN_MEDIUM_HEIGHT) sideMenu = true;\n            if (height <= SCREEN_SMALL_HEIGHT) largeView = false;\n        }\n        // don't switch to side menu if there's no horizontal room\n        if (width < SCREEN_MEDIUM_WIDTH) {\n            sideMenu = false;\n        }\n        if (!(isMobile || nativeApp)) {\n            if (sideMenu) {\n                if (width > MIN_SIDESCREEN_WIDTH_FOR_JOURNAL)\n                    journalSideMenu = true;\n            } else {\n                if (width > MIN_WIDTH_FOR_JOURNAL) journalSideMenu = true;\n            }\n        }\n\n        _updateViewportScale({ largeView, sideMenu, journalSideMenu });\n    }, [height, width]);\n\n    function updateViewportScale({ largeView, sideMenu, journalSideMenu }) {\n        store.dispatch({\n            type: 'SET_SIDE_MENU',\n            payload: sideMenu,\n        });\n        store.dispatch({\n            type: 'SET_LARGE_VIEW',\n            payload: largeView,\n        });\n        store.dispatch({\n            type: 'SET_SHOW_JOURNAL',\n            payload: journalSideMenu,\n        });\n\n        const { paused, journalDialog } = store.getState().dialog;\n        if (journalSideMenu && paused && journalDialog) {\n            store.dispatch({\n                type: 'PAUSE',\n                payload: { pause: false, journal: false },\n            });\n        }\n    }\n};\n\nexport default useGameViewportScaling;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,SAAS,MAAM,iBAAiB;AAEvC,OAAOC,KAAK,MAAM,uBAAuB;AACzC,OAAOC,aAAa,MAAM,gCAAgC;AAC1D,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,SACIC,kBAAkB,EAClBC,mBAAmB,EACnBC,mBAAmB,EACnBC,oBAAoB,EACpBC,qBAAqB,EACrBC,gCAAgC,QAC7B,2BAA2B;AAElC,MAAMC,oBAAoB,GAAG,GAAG;;AAEhC;AACA,MAAMC,sBAAsB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM;IAAEC,MAAM;IAAEC;EAAM,CAAC,GAAGZ,aAAa,CAAC,CAAC;EAEzC,MAAMa,SAAS,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,KAAK,iBAAiB;EAC9D,MAAMC,oBAAoB,GAAGnB,SAAS,CAClCoB,mBAAmB,EACnBV,oBACJ,CAAC;EAEDX,SAAS,CAAC,MAAM;IACZ,IAAIsB,SAAS,GAAG,KAAK;IACrB,IAAIC,QAAQ,GAAG,KAAK;IACpB,IAAIC,eAAe,GAAG,KAAK;IAC3B;IACA,IAAIT,KAAK,GAAGV,kBAAkB,EAAE;MAC5BiB,SAAS,GAAG,IAAI;MAChB;MACA,IAAIR,MAAM,GAAGN,oBAAoB,EAAEe,QAAQ,GAAG,IAAI;MAClD,IAAIT,MAAM,IAAIR,mBAAmB,EAAEgB,SAAS,GAAG,KAAK;IACxD;IACA;IACA,IAAIP,KAAK,GAAGR,mBAAmB,EAAE;MAC7BgB,QAAQ,GAAG,KAAK;IACpB;IACA,IAAI,EAAEnB,QAAQ,IAAIY,SAAS,CAAC,EAAE;MAC1B,IAAIO,QAAQ,EAAE;QACV,IAAIR,KAAK,GAAGL,gCAAgC,EACxCc,eAAe,GAAG,IAAI;MAC9B,CAAC,MAAM;QACH,IAAIT,KAAK,GAAGN,qBAAqB,EAAEe,eAAe,GAAG,IAAI;MAC7D;IACJ;IAEAJ,oBAAoB,CAAC;MAAEE,SAAS;MAAEC,QAAQ;MAAEC;IAAgB,CAAC,CAAC;EAClE,CAAC,EAAE,CAACV,MAAM,EAAEC,KAAK,CAAC,CAAC;EAEnB,SAASM,mBAAmBA,CAAAI,IAAA,EAA2C;IAAA,IAA1C;MAAEH,SAAS;MAAEC,QAAQ;MAAEC;IAAgB,CAAC,GAAAC,IAAA;IACjEvB,KAAK,CAACwB,QAAQ,CAAC;MACXC,IAAI,EAAE,eAAe;MACrBC,OAAO,EAAEL;IACb,CAAC,CAAC;IACFrB,KAAK,CAACwB,QAAQ,CAAC;MACXC,IAAI,EAAE,gBAAgB;MACtBC,OAAO,EAAEN;IACb,CAAC,CAAC;IACFpB,KAAK,CAACwB,QAAQ,CAAC;MACXC,IAAI,EAAE,kBAAkB;MACxBC,OAAO,EAAEJ;IACb,CAAC,CAAC;IAEF,MAAM;MAAEK,MAAM;MAAEC;IAAc,CAAC,GAAG5B,KAAK,CAAC6B,QAAQ,CAAC,CAAC,CAACC,MAAM;IACzD,IAAIR,eAAe,IAAIK,MAAM,IAAIC,aAAa,EAAE;MAC5C5B,KAAK,CAACwB,QAAQ,CAAC;QACXC,IAAI,EAAE,OAAO;QACbC,OAAO,EAAE;UAAEK,KAAK,EAAE,KAAK;UAAEC,OAAO,EAAE;QAAM;MAC5C,CAAC,CAAC;IACN;EACJ;AACJ,CAAC;AAACrB,EAAA,CA1DID,sBAAsB;EAAA,QACET,aAAa;AAAA;AA2D3C,eAAeS,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}