{"ast":null,"code":"import calculateModifier from '../../../utils/calculate-modifier';\nimport calculatePrices from '../../../utils/calculate-prices';\nexport default function sellItem(item) {\n  return (dispatch, getState) => {\n    const {\n      stats\n    } = getState();\n    const {\n      sellPrice\n    } = calculatePrices(item.value, calculateModifier(stats.abilities.charisma));\n    dispatch({\n      type: 'GET_GOLD',\n      payload: sellPrice\n    });\n    dispatch({\n      type: 'SELL_ITEM',\n      payload: item\n    });\n    const {\n      equippedItems\n    } = stats;\n    let itemEquipped = false;\n    // check if the item was equipped, then take it off\n    switch (item.type) {\n      case 'weapon':\n        if (JSON.stringify(equippedItems.weapon) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'ring':\n        if (JSON.stringify(equippedItems.ring) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'armor::body':\n        if (equippedItems.armor && JSON.stringify(equippedItems.armor.body) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'armor::pants':\n        if (equippedItems.armor && JSON.stringify(equippedItems.armor.pants) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'armor::helmet':\n        if (equippedItems.armor && JSON.stringify(equippedItems.armor.helmet) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'armor::boots':\n        if (equippedItems.armor && JSON.stringify(equippedItems.armor.boots) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      case 'armor::gloves':\n        if (equippedItems.armor && JSON.stringify(equippedItems.armor.gloves) === JSON.stringify(item)) itemEquipped = true;\n        break;\n      default:\n    }\n    if (itemEquipped) {\n      dispatch({\n        type: 'UNEQUIP_ITEM',\n        payload: item\n      });\n    }\n  };\n}","map":{"version":3,"names":["calculateModifier","calculatePrices","sellItem","item","dispatch","getState","stats","sellPrice","value","abilities","charisma","type","payload","equippedItems","itemEquipped","JSON","stringify","weapon","ring","armor","body","pants","helmet","boots","gloves"],"sources":["C:/Users/devis/Downloads/react-rpg.com-master/src/features/inventory/actions/sell-item.jsx"],"sourcesContent":["import calculateModifier from '../../../utils/calculate-modifier';\nimport calculatePrices from '../../../utils/calculate-prices';\n\nexport default function sellItem(item) {\n    return (dispatch, getState) => {\n        const { stats } = getState();\n        const { sellPrice } = calculatePrices(\n            item.value,\n            calculateModifier(stats.abilities.charisma)\n        );\n\n        dispatch({\n            type: 'GET_GOLD',\n            payload: sellPrice,\n        });\n\n        dispatch({\n            type: 'SELL_ITEM',\n            payload: item,\n        });\n\n        const { equippedItems } = stats;\n        let itemEquipped = false;\n        // check if the item was equipped, then take it off\n        switch (item.type) {\n            case 'weapon':\n                if (\n                    JSON.stringify(equippedItems.weapon) ===\n                    JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            case 'ring':\n                if (JSON.stringify(equippedItems.ring) === JSON.stringify(item))\n                    itemEquipped = true;\n                break;\n            case 'armor::body':\n                if (\n                    equippedItems.armor &&\n                    JSON.stringify(equippedItems.armor.body) ===\n                        JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            case 'armor::pants':\n                if (\n                    equippedItems.armor &&\n                    JSON.stringify(equippedItems.armor.pants) ===\n                        JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            case 'armor::helmet':\n                if (\n                    equippedItems.armor &&\n                    JSON.stringify(equippedItems.armor.helmet) ===\n                        JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            case 'armor::boots':\n                if (\n                    equippedItems.armor &&\n                    JSON.stringify(equippedItems.armor.boots) ===\n                        JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            case 'armor::gloves':\n                if (\n                    equippedItems.armor &&\n                    JSON.stringify(equippedItems.armor.gloves) ===\n                        JSON.stringify(item)\n                )\n                    itemEquipped = true;\n                break;\n            default:\n        }\n\n        if (itemEquipped) {\n            dispatch({\n                type: 'UNEQUIP_ITEM',\n                payload: item,\n            });\n        }\n    };\n}\n"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,mCAAmC;AACjE,OAAOC,eAAe,MAAM,iCAAiC;AAE7D,eAAe,SAASC,QAAQA,CAACC,IAAI,EAAE;EACnC,OAAO,CAACC,QAAQ,EAAEC,QAAQ,KAAK;IAC3B,MAAM;MAAEC;IAAM,CAAC,GAAGD,QAAQ,CAAC,CAAC;IAC5B,MAAM;MAAEE;IAAU,CAAC,GAAGN,eAAe,CACjCE,IAAI,CAACK,KAAK,EACVR,iBAAiB,CAACM,KAAK,CAACG,SAAS,CAACC,QAAQ,CAC9C,CAAC;IAEDN,QAAQ,CAAC;MACLO,IAAI,EAAE,UAAU;MAChBC,OAAO,EAAEL;IACb,CAAC,CAAC;IAEFH,QAAQ,CAAC;MACLO,IAAI,EAAE,WAAW;MACjBC,OAAO,EAAET;IACb,CAAC,CAAC;IAEF,MAAM;MAAEU;IAAc,CAAC,GAAGP,KAAK;IAC/B,IAAIQ,YAAY,GAAG,KAAK;IACxB;IACA,QAAQX,IAAI,CAACQ,IAAI;MACb,KAAK,QAAQ;QACT,IACII,IAAI,CAACC,SAAS,CAACH,aAAa,CAACI,MAAM,CAAC,KACpCF,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAEpBW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,MAAM;QACP,IAAIC,IAAI,CAACC,SAAS,CAACH,aAAa,CAACK,IAAI,CAAC,KAAKH,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAC3DW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,aAAa;QACd,IACID,aAAa,CAACM,KAAK,IACnBJ,IAAI,CAACC,SAAS,CAACH,aAAa,CAACM,KAAK,CAACC,IAAI,CAAC,KACpCL,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAExBW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,cAAc;QACf,IACID,aAAa,CAACM,KAAK,IACnBJ,IAAI,CAACC,SAAS,CAACH,aAAa,CAACM,KAAK,CAACE,KAAK,CAAC,KACrCN,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAExBW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,eAAe;QAChB,IACID,aAAa,CAACM,KAAK,IACnBJ,IAAI,CAACC,SAAS,CAACH,aAAa,CAACM,KAAK,CAACG,MAAM,CAAC,KACtCP,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAExBW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,cAAc;QACf,IACID,aAAa,CAACM,KAAK,IACnBJ,IAAI,CAACC,SAAS,CAACH,aAAa,CAACM,KAAK,CAACI,KAAK,CAAC,KACrCR,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAExBW,YAAY,GAAG,IAAI;QACvB;MACJ,KAAK,eAAe;QAChB,IACID,aAAa,CAACM,KAAK,IACnBJ,IAAI,CAACC,SAAS,CAACH,aAAa,CAACM,KAAK,CAACK,MAAM,CAAC,KACtCT,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,EAExBW,YAAY,GAAG,IAAI;QACvB;MACJ;IACJ;IAEA,IAAIA,YAAY,EAAE;MACdV,QAAQ,CAAC;QACLO,IAAI,EAAE,cAAc;QACpBC,OAAO,EAAET;MACb,CAAC,CAAC;IACN;EACJ,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}