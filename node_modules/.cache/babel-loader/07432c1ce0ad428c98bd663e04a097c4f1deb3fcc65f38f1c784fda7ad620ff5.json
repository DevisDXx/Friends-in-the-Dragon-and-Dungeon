{"ast":null,"code":"import cloneDeep from 'lodash.clonedeep';\nconst initialState = {\n  direction: 'SOUTH',\n  position: [0, 0],\n  playerMoved: false,\n  playerAttacked: false,\n  spellCast: false,\n  monsterAttacked: false,\n  playerDied: false,\n  monsterDied: false,\n  targetPosition: [],\n  spell: null,\n  turnsOutOfCombat: 0,\n  monsterUseProjectile: false,\n  monsterProjectileTargetPosition: [],\n  monsterProjectileDirection: '',\n  monsterProjectile: null,\n  effects: {\n    poisoned: {\n      turns: 0,\n      immunityTurns: 0,\n      damage: '0'\n    }\n  }\n};\nconst playerReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n  switch (type) {\n    case 'MONSTER_DIED':\n      // trigger monster's death sound\n      return {\n        ...state,\n        monsterDied: !state.monsterDied\n      };\n    case 'PLAYER_DIED':\n      // trigger player's death sound\n      return {\n        ...state,\n        playerDied: !state.playerDied\n      };\n    case 'MONSTER_ATTACK':\n      // trigger monster's attack animation on player\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0\n      };\n    case 'MONSTER_CAST_SPELL':\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0,\n        monsterUseProjectile: !state.monsterUseProjectile,\n        monsterProjectileTargetPosition: payload.position,\n        monsterProjectileDirection: payload.direction,\n        monsterProjectile: payload.spell\n      };\n    case 'SET_ACTIVE_SPELL':\n      return {\n        ...state,\n        spell: cloneDeep(payload.spell)\n      };\n    case 'USE_PROJECTILE':\n      return {\n        ...state,\n        playerAttacked: !state.playerAttacked,\n        targetPosition: payload ? payload.position : [],\n        turnsOutOfCombat: 0\n      };\n    case 'MONSTER_USE_PROJECTILE':\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0,\n        monsterUseProjectile: !state.monsterUseProjectile,\n        monsterProjectileTargetPosition: payload.position,\n        monsterProjectileDirection: payload.direction,\n        monsterProjectile: payload.projectile\n      };\n    case 'EFFECT_PLAYER':\n      {\n        const {\n          effect,\n          turns,\n          damage,\n          from\n        } = payload;\n        return {\n          ...state,\n          effects: {\n            ...state.effects,\n            [effect]: {\n              turns,\n              immunityTurns: turns * 5,\n              damage,\n              from\n            }\n          }\n        };\n      }\n    case 'CAST_SPELL':\n      return {\n        ...state,\n        spellCast: !state.spellCast,\n        targetPosition: payload ? payload.position : [],\n        turnsOutOfCombat: payload.projectile.kind === 'combat' ? 0 : state.turnsOutOfCombat\n      };\n    case 'PLAYER_ATTACK':\n      // trigger attack animation\n      return {\n        ...state,\n        playerAttacked: !state.playerAttacked,\n        turnsOutOfCombat: 0\n      };\n    case 'MOVE_PLAYER':\n      return {\n        ...state,\n        playerMoved: !state.playerMoved,\n        ...payload\n      };\n    case 'TAKE_TURN':\n      Object.keys(state.effects).forEach(effect => {\n        const props = state.effects[effect];\n        state.effects[effect] = {\n          ...props,\n          turns: props.turns - 1,\n          immunityTurns: props.immunityTurns - 1\n        };\n      });\n      return {\n        ...state,\n        turnsOutOfCombat: state.turnsOutOfCombat + 1\n      };\n    case 'RESET':\n      return initialState;\n    case 'LOAD_DATA':\n      return {\n        ...initialState,\n        ...payload.player\n      };\n    default:\n      return state;\n  }\n};\nexport default playerReducer;","map":{"version":3,"names":["cloneDeep","initialState","direction","position","playerMoved","playerAttacked","spellCast","monsterAttacked","playerDied","monsterDied","targetPosition","spell","turnsOutOfCombat","monsterUseProjectile","monsterProjectileTargetPosition","monsterProjectileDirection","monsterProjectile","effects","poisoned","turns","immunityTurns","damage","playerReducer","state","arguments","length","undefined","type","payload","projectile","effect","from","kind","Object","keys","forEach","props","player"],"sources":["C:/Users/devis/Downloads/react-rpg.com-master/src/features/player/reducer.jsx"],"sourcesContent":["import cloneDeep from 'lodash.clonedeep';\n\nconst initialState = {\n  direction: 'SOUTH',\n  position: [0, 0],\n  playerMoved: false,\n  playerAttacked: false,\n  spellCast: false,\n  monsterAttacked: false,\n  playerDied: false,\n  monsterDied: false,\n  targetPosition: [],\n  spell: null,\n  turnsOutOfCombat: 0,\n  monsterUseProjectile: false,\n  monsterProjectileTargetPosition: [],\n  monsterProjectileDirection: '',\n  monsterProjectile: null,\n  effects: {\n    poisoned: {\n      turns: 0,\n      immunityTurns: 0,\n      damage: '0',\n    },\n  },\n};\n\nconst playerReducer = (state = initialState, { type, payload }) => {\n  switch (type) {\n    case 'MONSTER_DIED':\n      // trigger monster's death sound\n      return { ...state, monsterDied: !state.monsterDied };\n\n    case 'PLAYER_DIED':\n      // trigger player's death sound\n      return { ...state, playerDied: !state.playerDied };\n\n    case 'MONSTER_ATTACK':\n      // trigger monster's attack animation on player\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0,\n      };\n\n    case 'MONSTER_CAST_SPELL':\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0,\n        monsterUseProjectile: !state.monsterUseProjectile,\n        monsterProjectileTargetPosition: payload.position,\n        monsterProjectileDirection: payload.direction,\n        monsterProjectile: payload.spell,\n      };\n\n    case 'SET_ACTIVE_SPELL':\n      return { ...state, spell: cloneDeep(payload.spell) };\n\n    case 'USE_PROJECTILE':\n      return {\n        ...state,\n        playerAttacked: !state.playerAttacked,\n        targetPosition: payload ? payload.position : [],\n        turnsOutOfCombat: 0,\n      };\n\n    case 'MONSTER_USE_PROJECTILE':\n      return {\n        ...state,\n        monsterAttacked: !state.monsterAttacked,\n        turnsOutOfCombat: 0,\n        monsterUseProjectile: !state.monsterUseProjectile,\n        monsterProjectileTargetPosition: payload.position,\n        monsterProjectileDirection: payload.direction,\n        monsterProjectile: payload.projectile,\n      };\n\n    case 'EFFECT_PLAYER': {\n      const { effect, turns, damage, from } = payload;\n\n      return {\n        ...state,\n        effects: {\n          ...state.effects,\n          [effect]: {\n            turns,\n            immunityTurns: turns * 5,\n            damage,\n            from,\n          },\n        },\n      };\n    }\n\n    case 'CAST_SPELL':\n      return {\n        ...state,\n        spellCast: !state.spellCast,\n        targetPosition: payload ? payload.position : [],\n        turnsOutOfCombat: payload.projectile.kind === 'combat' ? 0 : state.turnsOutOfCombat,\n      };\n\n    case 'PLAYER_ATTACK':\n      // trigger attack animation\n      return {\n        ...state,\n        playerAttacked: !state.playerAttacked,\n        turnsOutOfCombat: 0,\n      };\n\n    case 'MOVE_PLAYER':\n      return {\n        ...state,\n        playerMoved: !state.playerMoved,\n        ...payload,\n      };\n\n    case 'TAKE_TURN':\n      Object.keys(state.effects).forEach((effect) => {\n        const props = state.effects[effect];\n        state.effects[effect] = {\n          ...props,\n          turns: props.turns - 1,\n          immunityTurns: props.immunityTurns - 1,\n        };\n      });\n      return {\n        ...state,\n        turnsOutOfCombat: state.turnsOutOfCombat + 1,\n      };\n\n    case 'RESET':\n      return initialState;\n\n    case 'LOAD_DATA':\n      return { ...initialState, ...payload.player };\n\n    default:\n      return state;\n  }\n};\n\nexport default playerReducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}